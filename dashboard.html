<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ranking FoxLog</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- FUNDO -->
<div class="logo-bg"></div>

<!-- BOT√ÉO SAIR -->
<button class="btn-sair" onclick="sair()">üîì Sair</button>

<h1 id="mensagemTopo" class="titulo-superior"></h1>

<div class="box-nivel-topo">
    <p style="font-size:22px;">N√≠vel Atual:</p>
    <h2 id="nivelAtual"></h2>
</div>

<h3 id="nomeEntregador"></h3>

<div id="cards"></div>

<div id="mensagemExtras" class="mensagem-bloco"></div>

<script>
const API_URL =
 "https://script.google.com/macros/s/AKfycbwCK_46Is1Fj1rIDdsIclRh7s2TLYZM6gOaPc8U62COmgTNthXBX55z5wz7hkKgnAqEJA/exec";

async function carregarDados() {
    const cpf = localStorage.getItem("cpf");
    if (!cpf) window.location.href = "index.html";

    const response = await fetch(`${API_URL}?cpf=${cpf}`);
    const user = await response.json();

    if (user.error) {
        document.body.innerHTML = `<h1>CPF n√£o encontrado!</h1>`;
        return;
    }

    document.getElementById("nomeEntregador").innerText =
        "üëã Ol√°, " + user.Nome;

    document.getElementById("nivelAtual").innerText = user.Nivel;

    document.getElementById("mensagemTopo").innerHTML =
        `üéâ PARAB√âNS! VOC√ä EST√Å NO N√çVEL <b>${user.Nivel}</b> üéâ`;

    /* ================================
       CARDS CORRIGIDOS COM OVERTIME
    ================================= */
    document.getElementById("cards").innerHTML = `
        <div class='card'>TSH<br><b>${user.TSH}%</b></div>
        <div class='card'>AR<br><b>${user.AR}%</b></div>
        <div class='card'>CAA<br><b>${user.CAA}%</b></div>
        <div class='card'>OVERTIME<br><b>${user.OVERTIME}%</b></div>
        <div class='card'>Corridas Conclu√≠das<br><b>${user.Corridas}</b></div>
    `;

    let bloco = "";
    const nivel = user.Nivel.toUpperCase();

    /* ================================
       SUPERFOX
    ================================= */
    if (nivel === "SUPERFOX") {
        bloco = `
        <h2>RANKING ‚Äì SUPERFOX</h2>

        <p>Incr√≠vel, voc√™ est√° no maior n√≠vel, parab√©ns SuperFox.</p>

        <p><b>Parab√©ns por ter alcan√ßado o n√≠vel SUPER FOX, continue com os pontos chaves:</b></p>

        <ul>
            <li><span class="tsh">TSH</span> acima de <span class="valor">95%</span></li>
            <li><span class="ar">AR</span> MAIOR OU IGUAL A <span class="valor">95%</span></li>
            <li><span class="caa">CAA</span> MENOR OU IGUAL A <span class="valor">1%</span></li>
            <li><span class="overtime">OVERTIME</span> = <span class="valor">1%</span></li>
        </ul>

        <p><b>SEGUNDA, QUARTA E SEXTA SUA AGENDA ABRE A PARTIR DAS 8H40</b></p>

        <p>Voc√™ est√° muito BEM! Continue firme! ü¶äüî•</p>
        <p>Mantenha-se assim e garanta promo√ß√µes exclusivas e vantagens no agendamento.</p>

        <p class="aviso">
        ‚ö†Ô∏è LEMBRANDO QUE<br>
        Essa avalia√ß√£o serve apenas para manter sua prioridade na agenda.<br>
        N√£o √© cobran√ßa ‚Äî s√£o orienta√ß√µes para melhorar seu desempenho.<br>
        Voc√™ √© prestador de servi√ßo e tem autonomia total.
        </p>
        `;
    }

    /* ================================
       OURO
    ================================= */
    if (nivel === "OURO") {
        bloco = `
        <h2>RANKING ‚Äì OURO</h2>

        <p>Parab√©ns voc√™ est√° no N√≠vel Ouro!</p>

        <p><b>Parab√©ns por ter alcan√ßado o n√≠vel OURO, AGORA SUA AGENDA √â:<br>
        SEGUNDA, QUARTA E SEXTA ELA IR√Å ABRIR A PARTIR DAS 8H45</b></p>

        <p><b>ALCANCE os pontos chaves e torne-se N√≠vel SuperFox:</b></p>

        <ul>
            <li><span class="tsh">TSH</span> acima de <span class="valor">95%</span></li>
            <li><span class="ar">AR</span> MAIOR OU IGUAL A <span class="valor">95%</span></li>
            <li><span class="caa">CAA</span> MENOR OU IGUAL A <span class="valor">1%</span></li>
            <li><span class="overtime">OVERTIME</span> = <span class="valor">1%</span></li>
        </ul>

        <p>Ao alcan√ßar o n√≠vel SuperFox voc√™ garante promo√ß√µes exclusivas e prioridade no agendamento.</p>

        <p class="aviso">
        ‚ö†Ô∏è LEMBRANDO QUE<br>
        Essa avalia√ß√£o serve apenas para manter sua prioridade na agenda.<br>
        Voc√™ √© prestador de servi√ßo e tem autonomia total.
        </p>
        `;
    }

    /* ================================
       PRATA
    ================================= */
    if (nivel === "PRATA") {
        bloco = `
        <h2>RANKING ‚Äì PRATA</h2>

        <p>Parab√©ns voc√™ est√° no N√≠vel Prata!</p>

        <p><b>AGORA SUA AGENDA √â:<br>
        SEGUNDA, QUARTA E SEXTA ELA IR√Å ABRIR A PARTIR DAS 8H50</b></p>

        <p><b>ALCANCE os pontos chaves e torne-se N√≠vel SuperFox:</b></p>

        <ul>
            <li><span class="tsh">TSH</span> acima de <span class="valor">95%</span></li>
            <li><span class="ar">AR</span> MAIOR OU IGUAL A <span class="valor">95%</span></li>
            <li><span class="caa">CAA</span> MENOR OU IGUAL A <span class="valor">1%</span></li>
            <li><span class="overtime">OVERTIME</span> = <span class="valor">1%</span></li>
        </ul>

        <p>Busque evoluir para SuperFox e tenha benef√≠cios exclusivos!</p>

        <p class="aviso">
       ‚ö†Ô∏è LEMBRANDO QUE<br>
Essa avalia√ß√£o serve apenas para manter sua prioridade na agenda.
N√£o √© cobran√ßa ‚Äî s√£o orienta√ß√µes para melhorar seu desempenho.
Voc√™ √© prestador de servi√ßo e tem autonomia total.
        </p>
        `;
    }

    /* ================================
       BRONZE
    ================================= */
    if (nivel === "BRONZE") {
        bloco = `
        <h2>RANKING ‚Äì BRONZE</h2>

        <p>Parab√©ns voc√™ est√° no N√≠vel Bronze!</p>

        <p><b>SUA AGENDA ABRE A PARTIR DAS 8H55</b></p>

        <p><b>ALCANCE os pontos chaves e torne-se N√≠vel SuperFox:</b></p>

        <ul>
            <li><span class="tsh">TSH</span> acima de <span class="valor">95%</span></li>
            <li><span class="ar">AR</span> MAIOR OU IGUAL A <span class="valor">95%</span></li>
            <li><span class="caa">CAA</span> MENOR OU IGUAL A <span class="valor">1%</span></li>
            <li><span class="overtime">OVERTIME</span> = <span class="valor">1%</span></li>
        </ul>

        <p>Melhore seus indicadores e suba para n√≠veis maiores!</p>

        <p class="aviso">
        ‚ö†Ô∏è LEMBRANDO QUE<br>
Essa avalia√ß√£o serve apenas para manter sua prioridade na agenda.
N√£o √© cobran√ßa ‚Äî s√£o orienta√ß√µes para melhorar seu desempenho.
Voc√™ √© prestador de servi√ßo e tem autonomia total.
        </p>
        `;
    }

    /* ================================
       SEM NIVEL
    ================================= */
    if (nivel === "SEM NIVEL") {
        bloco = `
        <h2>RANKING ‚Äì N√ÉO CLASSIFICADO</h2>

        <p>Ah, n√£o foi dessa vez... voc√™ n√£o foi ranqueado.</p>

        <p><b>SUA AGENDA ABRE A PARTIR DAS 09H00</b></p>

        <p><b>Conclua 50 rotas e alcance os pontos chaves:</b></p>

        <ul>
            <li><span class="tsh">TSH</span> acima de <span class="valor">95%</span></li>
            <li><span class="ar">AR</span> MAIOR OU IGUAL A <span class="valor">95%</span></li>
            <li><span class="caa">CAA</span> MENOR OU IGUAL A <span class="valor">1%</span></li>
            <li><span class="overtime">OVERTIME</span> = <span class="valor">1%</span></li>
        </ul>

        <p>Alcance vantagens exclusivas subindo de n√≠vel!</p>

        <p class="aviso">
        ‚ö†Ô∏è LEMBRANDO QUE<br>
Essa avalia√ß√£o serve apenas para manter sua prioridade na agenda.
N√£o √© cobran√ßa ‚Äî s√£o orienta√ß√µes para melhorar seu desempenho.
Voc√™ √© prestador de servi√ßo e tem autonomia total.
        </p>
        `;
    }

    document.getElementById("mensagemExtras").innerHTML = bloco;
}

/* SAIR */
function sair() {
    localStorage.clear();
    window.location.href = "index.html";
}

/* AUTO LOGOUT 10 MINUTOS */
let tempoLimite = 10 * 60 * 1000;
let timer = setTimeout(sair, tempoLimite);

function resetTimer() {
    clearTimeout(timer);
    timer = setTimeout(sair, tempoLimite);
}

window.addEventListener("mousemove", resetTimer);
window.addEventListener("keydown", resetTimer);
window.addEventListener("click", resetTimer);

carregarDados();
</script>

</body>
</html>
